// loznotes is a notation layer for conveying information about wireframes, mockups and design comps. Originally a fork, this now a complete rewrite of Elliance's excellent Metaframe work (http://github.com/elliance/metaframe).
// ©2013 Loz Gray – Creative Commons Attribution Sharealike 3.0 Unported http://creativecommons.org/licenses/by-sa/3.0/
$(function(){function s(){if(i.length<=1||i[1]==="hidden"||i[1]==="hide"){o();i.length===1&&$("#note-anchors-display-toggle").attr("checked","checked")}}function o(){$(".notes-tab-pane").length>0&&$(".notes-anchor").add(".notes-tab-control").add(".notes-tab-pane").remove();e=$("[data-notation]");u(e);a(e);var r=$(".notes-anchor");$(t).add(r).click(function(e){t.toggleClass("is-open");n.toggleClass("is-open");e.preventDefault()});$("#note-anchors-display-toggle").click(function(){r.toggleClass("notes-hide")});if(i[1]==="hidden"||i[1]==="hide"){$("#notes-anchors-display-toggle").removeAttr("type");r.addClass("notes-hide")}}function u(e){t=$("<a/>",{"class":"notes-tab-control",href:"#"}).appendTo("body");n=$("<section/>",{"class":"notes-tab-pane"}).appendTo("body");n.html("<h1>"+r+"</h1>");var i=$('<form class="form-notes-display"><input type="checkbox" id="note-anchors-display-toggle" />Show note markers</form><h2>Page Notes</h2>');i.appendTo(n);var s=$("<dl/>",{"class":"notes-list"}).appendTo(n);for(var o=0;o<e.length;o++)s.append('<dt class="note-count note-count-'+(o+1)+'">'+(o+1)+"</dt>"+'<dd class="note-body note-body-'+(o+1)+'">'+$(e[o]).data("notation")+"</dd>")}function a(e){for(var t=0;t<e.length;t++)$(e[t]).prepend('<span class="notes-anchor"><figure>'+(t+1)+"</figure></span>")}var e,t,n,r=$(this).attr("title"),i=window.location.search.substring(1).split("=");s();$(document).ajaxComplete(function(){s()})});